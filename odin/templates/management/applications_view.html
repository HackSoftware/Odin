{% extends "dashboard/dashboard_base.html" %}
{% load application_extras %}

{% block page_content %}
  <div class="row">
    <div class="col-md-12">
      <h1>Total of {{ applications_count }}</h1>
      <table class="table table-stripped table-hover">
        <thead>
          <th>User</th>
          <th>Work</th>
          <th>Study</th>
          <th>Interview slot</th>
          <th>Interviewer</th>
          <th>Interviewers</th>
          <th></th>
        </thead>
        <tbody>
          {% for application in applications %}
            <tr>
              <td>{{ application.user }}</td>
              <td>{{ application.works_at }}</td>
              <td>{{ application.studies_at }}</td>
              <td>{{ application.interview_slot|default:'N/A' }}</td>
              <td>
                <form action="{% url 'dashboard:management:application-interview-person' application.id %}" method="POST">
                  {% csrf_token %}
                  <select name="int_person">
                    {% if not application.interview_person %}
                    <option value='' selected='selected'>Please Choose Interviewer</option>
                    {% else %}
                    <option value=''>Please Choose Interviewer</option>
                    {% endif %}
                    
                    {% for interviewer in interviewers %}
                    
                    {% if application.interview_person.email|is_equal:interviewer.email %}
                    <option value="{{ interviewer.id }}" selected='selected'>{{ interviewer.email }}</option>
                    
                    {% else %}
                    <option value="{{ interviewer.id }}">{{ interviewer.email }}</option>
                    
                    {% endif %}
                    {% endfor %}
                  </select>
                    
                  <button type="Submit">Update</button>  
                    
                </form>
              </td>
              <td>
                <a href="{% url 'dashboard:management:application-solutions' application.id %}">Check solutions</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock page_content %}
