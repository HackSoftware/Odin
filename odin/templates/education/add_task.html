{% extends "dashboard/dashboard_base.html" %}
{% load widget_tweaks %}
{% load static %}

{% block content_title %}
  Add task
{% endblock content_title%}

{% block page_content %}
  <div class="row">
    <div class="col-md-6">
      {% include "education/partial/message_box.html" %}
      {% include "partial/form_errors.html" with errors=readable_errors %}
      <div class="portlet light ">
        <div class="portlet-title">
          <div class="caption font-blue-sunglo">
            <i class="icon-settings font-blue-sunglo"></i>
            <span class="caption-subject bold uppercase"> Add task</span>
          </div>
        </div>
        <div class="portlet-body form">
          <form action="" method="POST">
            <div class="form-body">
              {% csrf_token %}

              <div class="form-group form-md-line-input">
                {% render_field form.name class="form-control form-control-solid placeholder-no-fix" id="form_control_1" placeholder="Task Name" %}
              </div>
              <div class="form-group form-md-line-input">
                {{ form.description.label }} - Markdown Supported
                {% render_field form.description class="form-control form-control-solid placeholder-no-fix" id="description_area" placeholder="Task Description" %}
	      </div>
              <div class="form-group form-md-line-input">
                {{ form.topic.label }}
                {% render_field form.topic class="form-control form-control-solid placeholder-no-fix"%}
              </div>
              <div class="md-checkbox-inline">
                <div class="md-checkbox">
                  {% render_field form.gradable id="checkbox6" class="md-check" onchange="changeTestFieldsVisibility()" %}
                  <label for="checkbox6">
                    <span></span>
                    <span class="check"></span>
                    <span class="box"></span> Make this task gradable </label>
                </div>
              </div>
              <div class="test-fields">
                <div class="form-group form-md-line-input">
                  {{ form.language.label }}
                  {% render_field form.language class="form-control form-control-solid" %}
                </div>
                <div class="form-group form-md-line-input">
                  <span>Write your tests below</span>
                  {% render_field form.code class="form-control form-control-solid placeholder-no-fix" id="code_area" placeholder="Enter your test code here" %}
                </div>
              </div>
              <div class="form-actions noborder">
                <button class="btn green uppercase" type="submit">Submit</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock page_content %}

{% block extra_scripts %}
  <script type="text/javascript">
    function changeTestFieldsVisibility(){
      checkbox = $('#checkbox6')[0];
      if (checkbox.checked) {
        $('.test-fields').show();
      }else {
        $('.test-fields').hide();
      }
    }
    $(document).ready(changeTestFieldsVisibility());
  </script>
  {% include "partial/code_editor.html" with mode="python" %}
  {% include "partial/code_editor.html" with area_id="description_area" mode="markdown"%}
{% endblock extra_scripts %}
