{% extends 'dashboard/dashboard_base.html' %}
{% load static %}
{% load education_extras %}
{% load common_extras %}

{% block content_title %}
  {{course.name}} {% if object.get_full_name %} - {{object.get_full_name}} {% endif %}
{% endblock content_title %}

{% block page_content %}
  <div class="row">
    <div class="col-md-12">
    {% include "education/partial/course_breadcrumb.html" with course=course student=object is_student_list=True %}
    {% include 'education/partial/course_student_portlet.html' with student=assignment.student assignment=assignment solutions=students_passed_solutions task_count=course_tasks|length %}
       <div class="portlet box green">
          <div class="portlet-title">
            <div class="caption">
              <i class="fa fa-gift"></i>Tasks
            </div>
          <div class="tools">
            <a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
          </div>
      </div>
      <div class="portlet-body">
        <div class="panel-group accordion" id="accordion1">
            {% for task, task_data in task_solutions.items %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapse_{{task.id}}" aria-expanded="true">
                    <div class="row">
                      <div class="col-md-6">
                        {{ task.name }}
                      </div>
                      <div class="col-md-6">
                          {{ task_data.1 }}
                      </div>
                    </div>
                  </a>
                </h4>
              </div>
              <div id="collapse_{{task.id}}" class="panel-collapse collapse" aria-expanded="false" style="">
                <div class="panel-body">
                  {% if task_data %}
                    {% for solution in task_data.0 %}
                      <div class="col-md-6">
                        Solution {{ forloop.counter }} - {{ solution.created_at }} - {{ solution.pass_or_fail_status }}
                      </div>
                      <div class="col-md-6">
                        {% include "education/partial/solution_modal.html" with solution=solution %}
                        <a class="btn green uppercase" data-toggle="modal" href="#large" data-target="#modal_{{solution.id}}" style="margin-top: 2px;"> Build log </a>
                      </div>
                    {% endfor %}
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock page_content %}

{% block extra_scripts %}
<script type="text/javascript">
  function handleSubmit() {
    var form = $('#noteForm');
    var input = $("<input>")
               .attr("type", "hidden")
               .attr("name", "detail").val("true");
    form.append($(input));
    form.submit();
  }
</script>
{% endblock extra_scripts %}
